# Локальное тестирование

Для запуска локальных тестов необходимо запустить все необходимые приложения и запустить команду
```bash
# Создать переменную окружения, в которую передать базовый URL вашего API, запущенного локально
export BASE_URL="http://localhost:8080/api"

# Запустить антифрод-сервис и указать переменную окружения, в которую передать базовый URL внутреннего API
docker run -e SERVER_PORT=9090 -e CACHE_DURATION_MS=5000 -p 9090:9090 lodthe/prod-backend-antifraud:latest
export ANTIFRAUD_URL="http://localhost:9090/internal"

# Запустить py.test, указав путь к файлам Tavern, которые хочется запустить
py.test test_01_ping.tavern.yml
```

## Переиспользование данных

В директории [components](public/components/) находятся файлы, которые в дальнейшем переиспользуются
сразу в нескольких тестах. Это сделано для удобства, чтобы избежать дублирования.

Если вы видите `- !include components/json/promo1.json`, это значит, что в данное место подставляется
JSON объект, который находится в файле по пути `components/json/promo1.json`.